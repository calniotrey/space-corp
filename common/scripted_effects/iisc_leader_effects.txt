# this = corp
spawn_scientist = {
	create_leader = {
		class = scientist
	}
	# TODO add experience/traits?
}

# this = leader
transfer_leader_to_overlord = {
	set_owner = owner.overlord
	# TODO add traits/experience
}

# this = fleet (science)
assign_random_scientist = {
	if = {
		limit = {
			NOT = {
				owner = {
					any_owned_leader = {
						leader_class = scientist
						is_scientist_idle = yes
					}
				}
			}
		}
		owner = {
			spawn_scientist = yes
		}
	}
	owner = {
		random_owned_leader = {
			limit = {
				leader_class = scientist
				is_scientist_idle = yes
			}
			prevprev = {
				assign_leader = prev
			}
		}
	}
}

# this = leader
# event_target:space_corps_overlord is set
set_recruit_price = {
	switch = {
		trigger = has_level
		1 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 1
			}
		}
		2 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 2
			}
		}
		3 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 3
			}
		}
		4 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 4
			}
		}
		5 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 5
			}
		}
		6 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 6
			}
		}
		7 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 7
			}
		}
		8 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 8
			}
		}
		9 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 9
			}
		}
		10 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 10
			}
		}
		11 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 11
			}
		}
		12 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 12
			}
		}
		13 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 13
			}
		}
		14 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 14
			}
		}
		15 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 15
			}
		}
		16 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 16
			}
		}
		17 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 17
			}
		}
		18 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 18
			}
		}
		19 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 19
			}
		}
		20 = {
			set_variable = {
				which = space_corps_recruit_price
				value = 20
			}
		}
	}
	multiply_variable = {
		which = space_corps_recruit_price
		value = space_corps_recruit_price
	}
	multiply_variable = {
		which = space_corps_recruit_price
		value = 100
	}
	change_variable = {
		which = space_corps_recruit_price
		value = 100
	}
	set_variable = {
		which = space_corps_energy_stock
		value = event_target:space_corps_overlord
	}
}

# this = corp country
select_5_random_recruitable_leaders = {
	random_owned_leader = {
		limit = {
			check_variable = {
				which = space_corps_recruit_price
				value = 0
			}
			[[CLASS]
			leader_class = $CLASS$
			]
		}
		set_recruit_price = yes
		save_event_target_as = space_corps_recruitable_leader_1
	}
	random_owned_leader = {
		limit = {
			check_variable = {
				which = space_corps_recruit_price
				value = 0
			}
			[[CLASS]
			leader_class = $CLASS$
			]
		}
		set_recruit_price = yes
		save_event_target_as = space_corps_recruitable_leader_2
	}
	random_owned_leader = {
		limit = {
			check_variable = {
				which = space_corps_recruit_price
				value = 0
			}
			[[CLASS]
			leader_class = $CLASS$
			]
		}
		set_recruit_price = yes
		save_event_target_as = space_corps_recruitable_leader_3
	}
	random_owned_leader = {
		limit = {
			check_variable = {
				which = space_corps_recruit_price
				value = 0
			}
			[[CLASS]
			leader_class = $CLASS$
			]
		}
		set_recruit_price = yes
		save_event_target_as = space_corps_recruitable_leader_4
	}
	random_owned_leader = {
		limit = {
			check_variable = {
				which = space_corps_recruit_price
				value = 0
			}
			[[CLASS]
			leader_class = $CLASS$
			]
		}
		set_recruit_price = yes
		save_event_target_as = space_corps_recruitable_leader_5
	}
}

# this = corp country
deselect_random_recruitable_leaders = {
	every_owned_leader = {
		limit = {
			check_variable = {
				which = space_corps_recruit_price
				value > 0
			}
		}
		set_variable = {
			which = space_corps_recruit_price
			value = 0
		}
	}
}

# this = leader
overlord_recruit_leader = {
	owner = {
		set_variable = {
			which = space_corps_recruit_price
			value = prev
		}
		SLEX_add_resource = {
			RESOURCE = energy
			AMOUNT = space_corps_recruit_price
		}
		event_target:space_corps_overlord = {
			set_variable = {
				which = space_corps_recruit_price
				value = prev
			}
			multiply_variable = {
				which = space_corps_recruit_price
				value = -1
			}
			SLEX_add_resource = {
				RESOURCE = energy
				AMOUNT = space_corps_recruit_price
			}
			set_variable = {
				which = space_corps_recruit_price
				value = 0
			}
		}
		set_variable = {
			which = space_corps_recruit_price
			value = 0
		}
		deselect_random_recruitable_leaders = yes
	}
	if = {
		limit = {
			exists = fleet
		}
		fleet = {
			prev = {
				unassign_leader = this
				set_owner = event_target:space_corps_overlord
			}
			assign_random_scientist = yes
		}
	}
	else = {
		set_owner = event_target:space_corps_overlord
	}
}
