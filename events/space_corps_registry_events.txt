namespace = space_corps_registry
#
#only for debug, spawns a corp
country_event = {
	id = space_corps_registry.1000
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		create_space_corp = yes
		last_created_country = { set_name = random }
	}
}
#THIS = player/corporate overlord
country_event = {
	id = space_corps_registry.0
	title = space_corps_registry.0.name
	desc = space_corps_registry.0.desc
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = "space_corps_registry_window"

	trigger = { is_ai = no }

	immediate = {
		random_country = {
			limit = {
				is_country_type = space_corp
				overlord = { is_same_value = PREVPREV }
				NOT = { has_country_flag = temp_registry_flag }
			}
			save_event_target_as = corporate_registry_corp_1
			get_headquarters = {
				TARGET = corporate_registry_corp_hq_1
			}
			set_timed_country_flag = {
				flag = temp_registry_flag
				days = 1
			}
		}
		random_country = {
			limit = {
				is_country_type = space_corp
				overlord = { is_same_value = PREVPREV }
				NOT = { has_country_flag = temp_registry_flag }
			}
			save_event_target_as = corporate_registry_corp_2
			get_headquarters = {
				TARGET = corporate_registry_corp_hq_2
			}
			set_timed_country_flag = {
				flag = temp_registry_flag
				days = 1
			}
		}
	}

	option = {
		name = space_corps_registry.0.corp_name_1
		custom_gui = "space_corps_registry_corp_name"
		trigger = {
			exists = event_target:corporate_registry_corp_1
		}
		hidden_effect = {
			event_target:corporate_registry_corp_1 = {
				get_overlord = yes
				get_headquarters = yes
				save_event_target_as = space_corp_country
			}
			country_event = {
				id = space_corps_diplomacy.11
			}
		}
	}
	option = {
		name = space_corps_registry.0.corp_hq_1
		custom_gui = "space_corps_registry_corp_hq"
		trigger = {
			exists = event_target:corporate_registry_corp_1
		}
	}

	option = {
		name = space_corps_registry.0.corp_name_2
		custom_gui = "space_corps_registry_corp_name"
		trigger = {
			exists = event_target:corporate_registry_corp_2
		}
		hidden_effect = {
			event_target:corporate_registry_corp_2 = {
				get_overlord = yes
				get_headquarters = yes
				save_event_target_as = space_corp_country
			}
			country_event = {
				id = space_corps_diplomacy.11
			}
		}
	}
	option = {
		name = space_corps_registry.0.corp_hq_2
		custom_gui = "space_corps_registry_corp_hq"
		trigger = {
			exists = event_target:corporate_registry_corp_2
		}
	}
}
